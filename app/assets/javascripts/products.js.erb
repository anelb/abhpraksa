function getColors() {
	return <%= Color.all.map { |color| [ color.product_color, color.hex_value ] } %>
}

function selectColors(colors, size) {
	return $(colors).filter('optgroup[label=' + size + ']').html();
}

function showColorBackground(target, color) {
	return $(target).css('background-color', color)
}

//Remove text
$(document).ready(function() {
  $('#product_variant_color_id').find('option').each(function() { 
  	$(this).text(' ');
  });
});

$(document).ready(function() {
	var colors = getColors() 
	$.each(colors, function(index, value) {
		var color = value[0]
		var hex_value = value[1]
		var options = $('#product_variant_color_id').find('option')
		$.each(options, function(index, option) {
			if( color == $(option).val()) {
				showColorBackground(option, color)
			}
		});
	});
});


$(document).ready(function() {
	colors = $('#product_variant_color_id').html(); 
  var defautSize = $('#product_variant_size_id :selected').text();
  var options = selectColors(colors, defautSize)
  $('#product_variant_color_id').html(options);
  var element = $('#product_variant_color_id')
	var color = $('#product_variant_color_id').find('option:selected').val()
	showColorBackground(element, color)
});

$(document).ready(function() {
  $('#product_variant_size_id').change(function() {
  	var selectedSize = $('#product_variant_size_id :selected').text();
		var options = selectColors(colors, selectedSize)
		$('#product_variant_color_id').html(options);
		var element = $('#product_variant_color_id')
		var color = $('#product_variant_color_id').find('option:selected').val()
		showColorBackground(element, color)
	});
});

$(document).ready(function() {
	$('#product_variant_color_id').change(function() {
		var element = $(this)
		var color = $(this).find('option:selected').val()
		showColorBackground(element, color)
	})
});