
function isEmpty( el ){
    return $.trim(el.text())
}

$.fn.selected = function() {
	return $(this).find('option:selected')
}

$.fn.value = function () {
		if( isEmpty(this) == ''){
    	return $(this).selected().val()
    }
    else {
    	return $(this).selected().text()
    }
};

function selectTagBackgroundCOlor() {
	$(color).css('background-color', color.value())
}

function addColorDropdown(){
	var options = $(colors).filter('optgroup[label=' + size.value() + ']').html();
	var new_colors = $('#product_variant_color_id').html(options)
	$.each($(new_colors).find('option'), function(){
		$(this).css('background-color', $(this).val())
	})
}

function removeText(){
	$('#product_variant_color_id').find('option').each(function() { $(this).text(' ') });
}

$(function() {

	color = $('#product_variant_color_id')
	size = $('#product_variant_size_id')
	colors = $('#product_variant_color_id').html()
 
	selectTagBackgroundCOlor()
	addColorDropdown()
	removeText()

	$('#product_variant_color_id').change(function(){ 
		selectTagBackgroundCOlor()
	})

	$('#product_variant_size_id').change(function(){
		addColorDropdown()
		selectTagBackgroundCOlor()
		removeText() 
	})

})